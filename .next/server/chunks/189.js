"use strict";exports.id=189,exports.ids=[189],exports.modules={8779:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseProxyResponse=void 0;let n=(0,o(r(28794)).default)("https-proxy-agent:parse-proxy-response");t.parseProxyResponse=function(e){return new Promise((t,r)=>{let o=0,s=[];function i(){let u=e.read();u?function(u){s.push(u),o+=u.length;let a=Buffer.concat(s,o),l=a.indexOf("\r\n\r\n");if(-1===l){n("have not received end of HTTP headers yet..."),i();return}let p=a.slice(0,l).toString("ascii").split("\r\n"),f=p.shift();if(!f)return e.destroy(),r(Error("No header received from proxy CONNECT response"));let h=f.split(" "),d=+h[1],y=h.slice(2).join(" "),g={};for(let t of p){if(!t)continue;let o=t.indexOf(":");if(-1===o)return e.destroy(),r(Error(`Invalid header from proxy CONNECT response: "${t}"`));let n=t.slice(0,o).toLowerCase(),s=t.slice(o+1).trimStart(),i=g[n];"string"==typeof i?g[n]=[i,s]:Array.isArray(i)?i.push(s):g[n]=s}n("got proxy server response: %o %o",f,g),c(),t({connect:{statusCode:d,statusText:y,headers:g},buffered:a})}(u):e.once("readable",i)}function c(){e.removeListener("end",u),e.removeListener("error",a),e.removeListener("readable",i)}function u(){c(),n("onend"),r(Error("Proxy connection ended before receiving CONNECT response"))}function a(e){c(),n("onerror %o",e),r(e)}e.on("error",a),e.on("end",u),i()})}},12666:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Agent=void 0;let c=s(r(91645)),u=s(r(81630)),a=r(55591);i(r(34323),t);let l=Symbol("AgentBaseInternalState");class p extends u.Agent{constructor(e){super(e),this[l]={}}isSecureEndpoint(e){if(e){if("boolean"==typeof e.secureEndpoint)return e.secureEndpoint;if("string"==typeof e.protocol)return"https:"===e.protocol}let{stack:t}=Error();return"string"==typeof t&&t.split("\n").some(e=>-1!==e.indexOf("(https.js:")||-1!==e.indexOf("node:https:"))}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let t=new c.Socket({writable:!1});return this.sockets[e].push(t),this.totalSocketCount++,t}decrementSockets(e,t){if(!this.sockets[e]||null===t)return;let r=this.sockets[e],o=r.indexOf(t);-1!==o&&(r.splice(o,1),this.totalSocketCount--,0===r.length&&delete this.sockets[e])}getName(e){return("boolean"==typeof e.secureEndpoint?e.secureEndpoint:this.isSecureEndpoint(e))?a.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,t,r){let o={...t,secureEndpoint:this.isSecureEndpoint(t)},n=this.getName(o),s=this.incrementSockets(n);Promise.resolve().then(()=>this.connect(e,o)).then(i=>{if(this.decrementSockets(n,s),i instanceof u.Agent)try{return i.addRequest(e,o)}catch(e){return r(e)}this[l].currentSocket=i,super.createSocket(e,t,r)},e=>{this.decrementSockets(n,s),r(e)})}createConnection(){let e=this[l].currentSocket;if(this[l].currentSocket=void 0,!e)throw Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[l].defaultPort??("https:"===this.protocol?443:80)}set defaultPort(e){this[l]&&(this[l].defaultPort=e)}get protocol(){return this[l].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[l]&&(this[l].protocol=e)}}t.Agent=p},34323:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.req=t.json=t.toBuffer=void 0;let i=s(r(81630)),c=s(r(55591));async function u(e){let t=0,r=[];for await(let o of e)t+=o.length,r.push(o);return Buffer.concat(r,t)}t.toBuffer=u,t.json=async function(e){let t=(await u(e)).toString("utf8");try{return JSON.parse(t)}catch(e){throw e.message+=` (input: ${t})`,e}},t.req=function(e,t={}){let r=(("string"==typeof e?e:e.href).startsWith("https:")?c:i).request(e,t),o=new Promise((e,t)=>{r.once("response",e).once("error",t).end()});return r.then=o.then.bind(o),r}},37189:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpsProxyAgent=void 0;let c=s(r(91645)),u=s(r(34631)),a=i(r(12412)),l=i(r(28794)),p=r(12666),f=r(79551),h=r(8779),d=(0,l.default)("https-proxy-agent"),y=e=>void 0===e.servername&&e.host&&!c.isIP(e.host)?{...e,servername:e.host}:e;class g extends p.Agent{constructor(e,t){super(t),this.options={path:void 0},this.proxy="string"==typeof e?new f.URL(e):e,this.proxyHeaders=t?.headers??{},d("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let r=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):"https:"===this.proxy.protocol?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...t?b(t,"headers"):null,host:r,port:o}}async connect(e,t){let r,{proxy:o}=this;if(!t.host)throw TypeError('No "host" provided');"https:"===o.protocol?(d("Creating `tls.Socket`: %o",this.connectOpts),r=u.connect(y(this.connectOpts))):(d("Creating `net.Socket`: %o",this.connectOpts),r=c.connect(this.connectOpts));let n="function"==typeof this.proxyHeaders?this.proxyHeaders():{...this.proxyHeaders},s=c.isIPv6(t.host)?`[${t.host}]`:t.host,i=`CONNECT ${s}:${t.port} HTTP/1.1\r
`;if(o.username||o.password){let e=`${decodeURIComponent(o.username)}:${decodeURIComponent(o.password)}`;n["Proxy-Authorization"]=`Basic ${Buffer.from(e).toString("base64")}`}for(let e of(n.Host=`${s}:${t.port}`,n["Proxy-Connection"]||(n["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close"),Object.keys(n)))i+=`${e}: ${n[e]}\r
`;let l=(0,h.parseProxyResponse)(r);r.write(`${i}\r
`);let{connect:p,buffered:f}=await l;if(e.emit("proxyConnect",p),this.emit("proxyConnect",p,e),200===p.statusCode)return(e.once("socket",v),t.secureEndpoint)?(d("Upgrading socket connection to TLS"),u.connect({...b(y(t),"host","path","port"),socket:r})):r;r.destroy();let g=new c.Socket({writable:!1});return g.readable=!0,e.once("socket",e=>{d("Replaying proxy buffer for failed request"),(0,a.default)(e.listenerCount("data")>0),e.push(f),e.push(null)}),g}}function v(e){e.resume()}function b(e,...t){let r,o={};for(r in e)t.includes(r)||(o[r]=e[r]);return o}g.protocols=["http","https"],t.HttpsProxyAgent=g}};