(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{285:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var a=s(5155);s(2115);var r=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:n,asChild:c=!1,...d}=e,o=c?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:s,size:n,className:t})),...d})}},1725:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(5155),r=s(2115),n=s(3490),i=s(1154);function l(e){let{user:t}=e,[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[o,u]=(0,r.useState)(null),m=(0,r.useRef)(null),{messages:x,input:p,handleInputChange:h,handleSubmit:f}=(0,n.Y_)({api:"/api/chat",body:{userId:t.id},onResponse:e=>{if(l(!1),d(null),e.ok){let t=e.statusText||"";(t.includes("task")||t.includes("Task"))&&(u("Task created successfully!"),setTimeout(()=>u(null),3e3))}},onError:e=>{l(!1),d(null),u("Error: ".concat(e.message||"Something went wrong")),setTimeout(()=>u(null),5e3)}});return(0,r.useEffect)(()=>{var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth"})},[x]),(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===x.length?(0,a.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,a.jsxs)("div",{className:"max-w-md text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Welcome to your Financial Advisor AI"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Ask me questions about your clients or request me to perform tasks like scheduling appointments."}),(0,a.jsxs)("div",{className:"mt-4 grid gap-2",children:[(0,a.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,a.jsx)("p",{className:"font-medium",children:"Examples:"}),(0,a.jsxs)("ul",{className:"mt-2 list-disc pl-4 text-sm",children:[(0,a.jsx)("li",{children:'"Who mentioned their kid plays baseball?"'}),(0,a.jsx)("li",{children:'"Why did Greg say he wanted to sell AAPL stock?"'}),(0,a.jsx)("li",{children:'"Schedule an appointment with Sara Smith"'})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,a.jsx)("p",{className:"font-medium",children:"Ongoing instructions:"}),(0,a.jsxs)("ul",{className:"mt-2 list-disc pl-4 text-sm",children:[(0,a.jsx)("li",{children:'"When someone emails me that is not in Hubspot, create a contact"'}),(0,a.jsx)("li",{children:'"When I create a contact in Hubspot, send them a welcome email"'})]})]})]})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[x.map((e,t)=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:"max-w-[80%] rounded-lg p-4 ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-100"),children:(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content})})},t)),(0,a.jsx)("div",{ref:m})]})}),(0,a.jsxs)("div",{className:"border-t p-4",children:[o&&(0,a.jsx)("div",{className:"mb-2 p-2 rounded text-sm ".concat(o.includes("Error")?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:o}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),""===p.trim())return;let t=p.toLowerCase();t.includes("draft an email")||t.includes("write an email")?d("email"):t.includes("schedule")||t.includes("appointment")?d("calendar"):(t.includes("contact")||t.includes("hubspot"))&&d("contact"),l(!0),f(e)},className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:p,onChange:h,placeholder:"Ask a question or request a task...",className:"flex-1 rounded-md border border-gray-300 px-4 py-2 focus:border-blue-500 focus:outline-none",disabled:s}),(0,a.jsx)("button",{type:"submit",className:"rounded-md bg-blue-500 px-4 py-2 text-white flex items-center justify-center min-w-[100px] ".concat(s?"opacity-80":"hover:bg-blue-600"),disabled:s,children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),"email"===c?"Creating email task...":"calendar"===c?"Scheduling...":"contact"===c?"Processing contact...":"Processing..."]}):"Send"})]})]})]})}},2797:(e,t,s)=>{Promise.resolve().then(s.bind(s,1725)),Promise.resolve().then(s.bind(s,3239)),Promise.resolve().then(s.bind(s,9851)),Promise.resolve().then(s.bind(s,9419)),Promise.resolve().then(s.bind(s,5095)),Promise.resolve().then(s.bind(s,7313))},3239:(e,t,s)=>{"use strict";s.d(t,{DataImport:()=>o});var a=s(5155),r=s(2115),n=s(285),i=s(6695),l=s(8262),c=s(1154),d=s(3464);function o(){let[e,t]=(0,r.useState)({all:!1,emails:!1,calendar:!1,contacts:!1}),{toast:s}=(0,l.dj)(),o=async e=>{try{t(t=>({...t,[e]:!0}));let a=await d.A.post("/api/ingest",{type:e});s({title:"Import started",description:"Your ".concat("all"===e?"data":e," import has been initiated.")}),a.data.taskId&&setTimeout(()=>{s({title:"Import in progress",description:"This may take a few minutes. You'll be notified when it's complete."})},3e3)}catch(t){console.error("Error importing ".concat(e,":"),t),s({title:"Error",description:"Failed to import ".concat(e,". Please try again."),variant:"destructive"})}finally{t(t=>({...t,[e]:!1}))}};return(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Data Import"}),(0,a.jsx)(i.BT,{children:"Import your data to enable the AI assistant to provide personalized help"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)(n.$,{variant:"default",onClick:()=>o("emails"),disabled:e.emails||e.all,className:"flex items-center justify-center",children:e.emails?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):"Import Emails"}),(0,a.jsx)(n.$,{variant:"default",onClick:()=>o("calendar"),disabled:e.calendar||e.all,className:"flex items-center justify-center",children:e.calendar?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):"Import Calendar"}),(0,a.jsx)(n.$,{variant:"default",onClick:()=>o("contacts"),disabled:e.contacts||e.all,className:"flex items-center justify-center",children:e.contacts?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):"Import Contacts"}),(0,a.jsx)(n.$,{variant:"default",onClick:()=>o("all"),disabled:e.all||e.emails||e.calendar||e.contacts,className:"flex items-center justify-center",children:e.all?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing All..."]}):"Import All"})]}),(0,a.jsx)("div",{className:"mt-4 text-xs text-muted-foreground",children:(0,a.jsx)("p",{children:"Importing your data allows the AI assistant to provide personalized recommendations and answer questions about your clients, emails, and calendar."})})]})]})}},5095:(e,t,s)=>{"use strict";s.d(t,{TasksPanel:()=>L});var a=s(5155),r=s(2115),n=s(285),i=s(6695),l=s(6126),c=s(646),d=s(4186),o=s(5339),u=s(3904),m=s(9145),x=s(8979),p=s(2657),h=s(2525),f=s(8262),g=s(3464),v=s(3651),b=s(4416),j=s(9434);let N=v.bL;v.l9;let y=v.ZL;v.bm;let w=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(v.hJ,{ref:t,className:(0,j.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});w.displayName=v.hJ.displayName;let k=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(w,{}),(0,a.jsxs)(v.UC,{ref:t,className:(0,j.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,(0,a.jsxs)(v.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});k.displayName=v.UC.displayName;let E=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,j.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};E.displayName="DialogHeader";let A=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(v.hE,{ref:t,className:(0,j.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});A.displayName=v.hE.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(v.VY,{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",s),...r})}).displayName=v.VY.displayName;var S=s(757),C=s(8883),I=s(9074),T=s(1007),D=s(7434);function P(e){var t,s,r;let{task:i,isOpen:c,onClose:d,onComplete:o}=e,u=e=>{try{let t=new Date(e);return"".concat(t.toLocaleDateString()," ").concat(t.toLocaleTimeString())}catch(t){return e}};return i?(0,a.jsx)(N,{open:c,onOpenChange:e=>!e&&d(),children:(0,a.jsxs)(k,{className:"sm:max-w-lg",children:[(0,a.jsxs)(E,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(e=>{switch(e){case"EMAIL":return(0,a.jsx)(C.A,{className:"h-5 w-5 text-blue-500"});case"CALENDAR":return(0,a.jsx)(I.A,{className:"h-5 w-5 text-green-500"});case"HUBSPOT":return(0,a.jsx)(T.A,{className:"h-5 w-5 text-orange-500"});default:return(0,a.jsx)(D.A,{className:"h-5 w-5 text-gray-500"})}})(i.type),(0,a.jsx)(A,{children:i.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.E,{className:(e=>{switch(e){case"PENDING":return"bg-yellow-100 text-yellow-800";case"IN_PROGRESS":return"bg-blue-100 text-blue-800";case"COMPLETED":return"bg-green-100 text-green-800";case"FAILED":return"bg-red-100 text-red-800";case"WAITING_FOR_RESPONSE":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(i.status),children:i.status.replace(/_/g," ")}),(0,a.jsx)(l.E,{variant:"outline",children:i.type}),(null==(t=i.metadata)?void 0:t.currentStep)&&(null==(s=i.metadata)?void 0:s.totalSteps)&&(0,a.jsxs)(l.E,{variant:"outline",children:["Step ",i.metadata.currentStep," of ",i.metadata.totalSteps]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Description"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.description})]}),"EMAIL"===i.type&&(null==(r=i.metadata)?void 0:r.emailDraft)&&(0,a.jsxs)("div",{className:"space-y-3 border rounded-md p-3 bg-gray-50",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Email Draft Details"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"To:"}),(0,a.jsx)("p",{className:"text-sm",children:i.metadata.emailDraft.to||"(Not specified)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Subject:"}),(0,a.jsx)("p",{className:"text-sm",children:i.metadata.emailDraft.subject||"(No subject)"})]}),i.metadata.emailDraft.body&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Body:"}),(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap border rounded p-2 bg-white",children:i.metadata.emailDraft.body})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Created:"}),(0,a.jsx)("p",{className:"font-medium",children:u(i.createdAt)}),(0,a.jsxs)("p",{className:"text-xs",children:["(",(0,S.m)(new Date(i.createdAt),{addSuffix:!0}),")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"COMPLETED"===i.status?"Completed:":"Last Updated:"}),(0,a.jsx)("p",{className:"font-medium",children:u("COMPLETED"===i.status&&i.completedAt?i.completedAt:i.updatedAt)}),(0,a.jsxs)("p",{className:"text-xs",children:["(",(0,S.m)(new Date("COMPLETED"===i.status&&i.completedAt?i.completedAt:i.updatedAt),{addSuffix:!0}),")"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:["COMPLETED"!==i.status&&o&&(0,a.jsx)(n.$,{variant:"outline",onClick:()=>{o(i.id),d()},children:"Mark as Complete"}),(0,a.jsx)(n.$,{onClick:d,children:"Close"})]})]})]})}):null}function L(){let[e,t]=(0,r.useState)([]),[s,v]=(0,r.useState)(!1),[b,j]=(0,r.useState)([]),[N,y]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[E,A]=(0,r.useState)(!1),{toast:S}=(0,f.dj)(),C=(0,r.useCallback)(async e=>{try{v(!0);let s="/api/tasks";e?(s="/api/tasks/bulk?status=".concat(e),y(e)):y(null);let a=await g.A.get(s);t(a.data.tasks||a.data),j([])}catch(e){console.error("Error fetching tasks:",e),S({title:"Error",description:"Failed to load tasks",variant:"destructive"})}finally{v(!1)}},[S]);(0,r.useEffect)(()=>{C()},[C]);let I=(0,r.useCallback)(async e=>{try{v(!0),await g.A.post("/api/tasks/complete",{taskId:e}),S({title:"Success",description:"Task marked as completed"}),C(N||void 0)}catch(e){console.error("Error completing task:",e),S({title:"Error",description:"Failed to complete task",variant:"destructive"})}finally{v(!1)}},[S,C,N]),T=(0,r.useCallback)(async e=>{try{v(!0),await g.A.delete("/api/tasks/".concat(e)),S({title:"Success",description:"Task deleted successfully"}),C(N||void 0)}catch(e){console.error("Error deleting task:",e),S({title:"Error",description:"Failed to delete task",variant:"destructive"})}finally{v(!1)}},[S,C,N]),D=(0,r.useCallback)(e=>{j(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),L=(0,r.useCallback)(async()=>{if(0!==b.length)try{v(!0),await g.A.post("/api/tasks/bulk",{taskIds:b,status:"COMPLETED"}),S({title:"Success",description:"".concat(b.length," tasks marked as completed")}),C(N||void 0)}catch(e){console.error("Error completing tasks in bulk:",e),S({title:"Error",description:"Failed to complete tasks",variant:"destructive"})}finally{v(!1)}},[b,v,S,C,N]),O=(0,r.useCallback)(e=>{switch(e){case"COMPLETED":return(0,a.jsx)(c.A,{className:"h-4 w-4 text-green-500"});case"PENDING":case"IN_PROGRESS":return(0,a.jsx)(d.A,{className:"h-4 w-4 text-amber-500"});case"FAILED":return(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"});case"WAITING_FOR_RESPONSE":return(0,a.jsx)(u.A,{className:"h-4 w-4 text-blue-500"})}},[]),R=(0,r.useCallback)(e=>{switch(e){case"EMAIL":return"default";case"CALENDAR":return"secondary";case"HUBSPOT":return"outline";case"GENERAL":return"destructive"}},[]),_=(0,r.useCallback)(e=>new Date(e).toLocaleString(),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Zp,{className:"w-full",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{children:"Tasks"}),(0,a.jsx)(i.BT,{children:"View and manage tasks created by your AI assistant"})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[b.length>0&&(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:L,disabled:s,children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Complete Selected"]}),(0,a.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>C(),disabled:s,className:N?"bg-gray-100":"",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"All Tasks"]})]})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>C("PENDING"),className:"PENDING"===N?"bg-gray-100":"",children:"Pending"}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>C("IN_PROGRESS"),className:"IN_PROGRESS"===N?"bg-gray-100":"",children:"In Progress"}),(0,a.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>C("COMPLETED"),className:"COMPLETED"===N?"bg-gray-100":"",children:"Completed"})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:N?"No ".concat(N.toLowerCase()," tasks found."):"No tasks yet. Your AI assistant will create tasks when needed."}):e.map(e=>(0,a.jsxs)("div",{className:"border rounded-md p-4 space-y-2 ".concat(b.includes(e.id)?"border-blue-500 bg-blue-50":""," cursor-pointer hover:bg-gray-50"),onClick:()=>{k(e),A(!0)},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{onClick:t=>{t.stopPropagation(),D(e.id)},className:"cursor-pointer p-1 hover:bg-gray-100 rounded",children:b.includes(e.id)?(0,a.jsx)(m.A,{className:"h-4 w-4 text-blue-500"}):(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-400"})}),O(e.status),(0,a.jsx)("h3",{className:"font-medium",children:e.title})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.E,{variant:R(e.type),children:e.type}),"COMPLETED"!==e.status&&(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),I(e.id)},children:(0,a.jsx)(m.A,{className:"h-4 w-4 text-green-500"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),k(e),A(!0)},children:(0,a.jsx)(p.A,{className:"h-4 w-4 text-blue-500"})}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:t=>{t.stopPropagation(),T(e.id)},children:(0,a.jsx)(h.A,{className:"h-4 w-4 text-red-500"})})]})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Created: ",_(e.createdAt)]}),(0,a.jsx)("span",{children:"COMPLETED"===e.status&&e.completedAt?"Completed: ".concat(_(e.completedAt)):"Updated: ".concat(_(e.updatedAt))})]})]},e.id))})]}),(0,a.jsxs)(i.wL,{className:"text-xs text-muted-foreground",children:["Tasks are automatically created and managed by the AI assistant when processing your requests.",e.length>0&&(0,a.jsx)("span",{className:"ml-1 font-medium",children:b.length>0?"".concat(b.length," tasks selected"):""})]})]}),(0,a.jsx)(P,{task:w,isOpen:E,onClose:()=>A(!1),onComplete:I})]})}},6126:(e,t,s)=>{"use strict";s.d(t,{E:()=>c});var a=s(5155);s(2115);var r=s(9708),n=s(2085),i=s(9434);let l=(0,n.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:s,asChild:n=!1,...c}=e,d=n?r.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:s}),t),...c})}},6695:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>o});var a=s(5155);s(2115);var r=s(9434);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",t),...s})}},7313:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>i,TabsContent:()=>d,TabsList:()=>l,TabsTrigger:()=>c});var a=s(5155);s(2115);var r=s(8880),n=s(9434);function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...s})}},8262:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function o(e){d=l(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_VALUE).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},9419:(e,t,s)=>{"use strict";s.d(t,{InstructionsPanel:()=>v});var a=s(5155),r=s(2115),n=s(285),i=s(9434);let l=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});l.displayName="Input";var c=s(6695),d=s(8611);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(d.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(d.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=d.bL.displayName;var u=s(968);let m=(0,s(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(u.b,{ref:t,className:(0,i.cn)(m(),s),...r})});x.displayName=u.b.displayName;var p=s(4616),h=s(2525),f=s(8262),g=s(3464);function v(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),{toast:m}=(0,f.dj)(),v=(0,r.useCallback)(async()=>{try{u(!0);let e=await g.A.get("/api/instructions");t(e.data.instructions)}catch(e){console.error("Error fetching instructions:",e),m({title:"Error",description:"Failed to load instructions",variant:"destructive"})}finally{u(!1)}},[m]);(0,r.useEffect)(()=>{v()},[v]);let b=async()=>{if(s.trim())try{u(!0);let a=await g.A.post("/api/instructions",{instruction:s});t([...e,a.data]),i(""),m({title:"Success",description:"Instruction added successfully"})}catch(e){console.error("Error adding instruction:",e),m({title:"Error",description:"Failed to add instruction",variant:"destructive"})}finally{u(!1)}},j=async(s,a)=>{try{u(!0),await g.A.patch("/api/instructions/".concat(s),{active:a}),t(e.map(e=>e.id===s?{...e,active:a}:e))}catch(e){console.error("Error updating instruction:",e),m({title:"Error",description:"Failed to update instruction",variant:"destructive"})}finally{u(!1)}},N=async s=>{try{u(!0),await g.A.delete("/api/instructions/".concat(s)),t(e.filter(e=>e.id!==s)),m({title:"Success",description:"Instruction deleted successfully"})}catch(e){console.error("Error deleting instruction:",e),m({title:"Error",description:"Failed to delete instruction",variant:"destructive"})}finally{u(!1)}};return(0,a.jsxs)(c.Zp,{className:"w-full",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Ongoing Instructions"}),(0,a.jsx)(c.BT,{children:"Set up instructions for your AI assistant to follow continuously"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l,{placeholder:"Add a new instruction...",value:s,onChange:e=>i(e.target.value),disabled:d}),(0,a.jsx)(n.$,{onClick:b,disabled:d||!s.trim(),size:"icon",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"space-y-2",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No instructions yet. Add one to get started."}):e.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm",children:e.instruction}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created on ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o,{checked:e.active,onCheckedChange:t=>j(e.id,t),disabled:d}),(0,a.jsx)(x,{className:"text-xs",children:"Active"})]}),(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>N(e.id),disabled:d,children:(0,a.jsx)(h.A,{className:"h-4 w-4 text-destructive"})})]})]},e.id))})]})}),(0,a.jsx)(c.wL,{className:"text-xs text-muted-foreground",children:"Instructions will be followed by the AI assistant when processing your requests and responding to events from Gmail, Calendar, and HubSpot."})]})}},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9851:(e,t,s)=>{"use strict";s.d(t,{IngestionStatus:()=>m});var a=s(5155),r=s(2115),n=s(6695),i=s(5863),l=s(9434);function c(e){let{className:t,value:s,...r}=e;return(0,a.jsx)(i.bL,{"data-slot":"progress",className:(0,l.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:(0,a.jsx)(i.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})}var d=s(6126),o=s(8262),u=s(3464);function m(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),{toast:l}=(0,o.dj)(),m=(0,r.useCallback)(async()=>{try{i(!0);let e=await u.A.get("/api/ingest/status");t(e.data.statuses)}catch(e){console.error("Error fetching ingestion statuses:",e),l({title:"Error",description:"Failed to load ingestion statuses",variant:"destructive"})}finally{i(!1)}},[l]);(0,r.useEffect)(()=>{m();let t=setInterval(()=>{e.some(e=>"PENDING"===e.status||"IN_PROGRESS"===e.status)&&m()},5e3);return()=>clearInterval(t)},[e,m]);let x=e=>new Date(e).toLocaleString(),p=e=>{switch(e){case"PENDING":return(0,a.jsx)(d.E,{variant:"secondary",children:"Pending"});case"IN_PROGRESS":return(0,a.jsx)(d.E,{variant:"default",children:"In Progress"});case"COMPLETED":return(0,a.jsx)(d.E,{variant:"outline",className:"bg-green-100 text-green-800 border-green-300",children:"Completed"});case"FAILED":return(0,a.jsx)(d.E,{variant:"destructive",children:"Failed"})}},h=e=>{switch(e){case"EMAIL":return"Email Import";case"CALENDAR":return"Calendar Import";case"HUBSPOT":return"HubSpot Import";case"ALL":return"Full Data Import"}},f=e=>0===e.total?0:Math.round(e.progress/e.total*100),g=e.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()).slice(0,5);return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Data Import Status"}),(0,a.jsx)(n.BT,{children:"View the status of your data imports"})]}),(0,a.jsx)(n.Wu,{children:s&&0===e.length?(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"Loading import statuses..."}):0===g.length?(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No recent data imports"}):(0,a.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-medium",children:h(e.type)}),p(e.status)]}),(0,a.jsx)(c,{value:f(e),className:"h-2"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:[e.progress," of ",e.total," items processed"]}),(0,a.jsx)("span",{children:x(e.updatedAt)})]})]},e.id))})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[881,984,441,684,358],()=>t(2797)),_N_E=e.O()}]);